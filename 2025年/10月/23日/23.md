# 2025-10-23：今日のまとめ
今日はrubyの分野に絞って勉強を行った。まだ基礎的なところの理解が足りていないと思ったので、書籍などを使って、基本的な文法などを再度復習する必要があると感じました。

# Polymorphic（ポリモーフィック関連）
- polymorphic: true は、1つの関連（association）で複数のモデルを扱いたいときに使う。
- 例えば、ArticleBlock モデルでは blockable が Sentence, Medium, Embed など、異なるモデルのどれかになり得る。
- Railsは自動的に blockable_type（文字列）と blockable_id（ID）カラムを使って、どのモデルを参照しているか判断できるようになる。


# is_a? メソッドの使い方
- object.is_a?(Class) は、そのオブジェクトが特定のクラス（またはそのサブクラス）かどうかを判定する。
≈TILでは article_block.blockable.is_a?(Medium) というように使い、ブロックの中身がどのタイプかを判定して処理を分けていた。


# render_to_string の理解
- render_to_string は、画面には表示せず、指定のビューをHTMLの文字列として取得するメソッド。
コントローラー内で使うことが多く、メール本文やプレビュー用HTMLを組み立てたいときに便利。
- ビューのテンプレートをサーバーサイドで使いまわせる柔軟な手法。


# nilガードの基本
- .present? は nil や空のとき false を返す便利なメソッド。
- - if medium.image_url(:lg).present? のような記述で、nilや空文字列のときにエラーが起きるのを防止できる。


# << 演算子と文字列結合
- result << string という記述で、複数の文字列を順番に結合していく処理。
- TILでは build_body メソッドで HTML を連結して1つの文字列にするために使用された。
- テンプレートが適切に改行やタグを含んでいるため、繋がっても崩れない。


# scope の定義
- スコープはクエリの再利用を容易にするためのメソッド。
- published（enum）と published_at 条件を組み合わせて「公開済みの記事」を絞り込むスコープを定義していた。