# cron + whenever を使った自動タスク管理 in Rails（2025-10-26）
- whenever gem を使って 定期的に Rake タスクを実行する方法を実践。
- cron -f を使って、コンテナ内で cron をフォアグラウンド実行する方法を確認。
- log/crontab.log を指定して cron タスクの実行ログをファイルに出力する方法を習得。

- docker compose exec web bash で Web コンテナに入り、cron -f で cron を起動。
- whenever コマンドで cron 設定を確認：

docker compose exec web bundle exec whenever


## 学び
- cron -f で動作確認する場合は、実行結果をログファイルで追うのが確実。
- log/crontab.log は cron 実行時に自動生成されるため、事前作成は不要。
- every 1.hours は every 1.hour にしてもOK。どちらも構文として有効。

# Rakeタスクで公開待ち記事の自動更新を実装
- namespace :article_inspection に changed_to_published タスクを定義。
- Article.publish_wait.find_each で対象記事を取得し、published_at <= Time.current なら state: :published に変更。
- update! を使ってバリデーションを通しつつ保存。
- タスク実行後にログへ出力（puts）で確認しやすく。