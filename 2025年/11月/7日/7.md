# Active Storageによるファイルアップロードの基本
- has_one_attached / has_many_attached を使ったファイル添付のモデル設計
- フォームからのファイルアップロード（file_field と multiple: true の使い方）
- アップロードした画像の表示（image_tag + url_for / variant）
- アップロード済みファイルの削除（purge, purge_later）

# 管理画面からの添付ファイル削除処理
- ActiveStorage::Attachment.find(params[:id]) による添付ファイルの取得
- image.purge による削除処理の実装
- 添付ファイル削除のルーティングと、attachments_controller.rb の設計
- Pundit を使った authorize(current_site) の活用（アクセス制御）


# バリデーションの拡張とカスタムバリデータの実装
- attachment バリデータの自作（AttachmentValidator）
- 単数・複数の添付ファイルに対するバリデーションの分岐処理
- （value.is_a?単数・複数の添付ファイルに対するバリデーションの分岐処理（value.is_a?(ActiveStorage::Attached::Many)）


# Swiperを使ったスライド表示の導入とデザイン
- swiper.js の導入とアセットパイプラインの設定（yarn add swiper, assets.rb, @import）
- swiper-container / swiper-wrapper / swiper-slide のHTML構造
- JavaScriptでの初期化 (new Swiper(...))
- .blog-title を重ねるレイアウト（CSSの position: absolute, z-index, transform）


# Railsアプリケーション全体構成と責務分離
- Active Storage関連の責務を Admin::Site::AttachmentsController に分離
- 画像アップロードに関するフォームのレイアウト
- 複数画像の管理と表示を main_images によって実装
- Site モデルの拡張と site_params への main_images: [] の追加


# セキュリティとアクセス制御
- Punditによるポリシー管理（destroy? の定義）
- authorize(current_site) による削除操作の制限


# 今日の作業まとめ
- Action Mailer を使って、記事の集計結果を管理者にメール送信する処理を実装した。
- ArticleMailer クラスに report_summary メソッドを定義し、前日に公開された記事を集計してメール本文に出力する処理を追加。
- ビューテンプレート（.text.erb）では、インデントがそのまま空白としてメールに反映されるため、本文内のインデントを避けて実装した。
- メールレイアウトを layouts/mailer.text.erb に設定し、共通の装飾やレイアウトを適用。
- 開発環境では letter_opener_web を使用して、ブラウザ上でメール内容を確認できるように設定。
- メール送信用の Rake タスク article_mailer:report_summary_delivery を作成。
- whenever を導入し、schedule.rb に定期実行スケジュール（毎朝9時）を記述。
- Docker コンテナ内で cron サービスを起動し、スケジュールされたタスクが自動実行されるようにした。
- Article.published のようなスコープメソッドは、enum により状態（state）を published として定義しているため使える。