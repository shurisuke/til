# 今日のまとめ
今日はDrivePeekの実装フローを細かくissue化して、具体的に作業内容をイメージすることができた。
優しい知り合いの方が、DHHさんのプログラミング思考に関する技術記事を教えてくれて、考え方や責務分離の大きな参考になりました。
早く実装したい。楽しみです。明日も頑張ろ！！

# issueベース開発を想定した、issue下書き作成メモ

1.	スポット追加の処理設計
スポット追加時には spots, plan_spots, user_spots, tags, user_spot_tags の各テーブルを連続してに扱う必要があると思った。重複チェックやバリデーションも必要。

2.	経路・時間の再計算ロジックのタイミング
スポット追加・削除・位置変更・滞在時間変更・出発地点、帰宅地点変更時に RecalculateAllRoutes のようなサービスオブジェクトを通じて再計算する

3.	地図上のUIフロー
モーダルを使って出発時間などを入力する処理フローを構築し、出発地点が存在しているかどうかで「追加/変更」の切り替えを行う判断処理を実装しようと思った

4.	Issueの責務分離と粒度設計
複雑なIssueは、役割単位に細かく分割し、「スポット追加」「出発地点登録」「InfoWindow表示」などに切り分けることで可読性が上がることを学んだ
あまり一つのissueに責務を詰め込みすぎないようにする

5. Turboで非同期にする方法も少しずつ理解できた
今はまずは同期で作って、あとでTurboを使って部分的に非同期に切り替える方法が良さそう。Turbo Frameを使うとできるらしい。

6.	検索処理は専用のクラスにまとめる
コントローラに全部書くとごちゃごちゃするので、app/search/配下にplan_searcher.rb みたいな感じで検索専用のクラスを作って処理をまとめる方法を知った。
DHHさんのプログラミング思考を真似して自分も責務分離を意識した簡潔なコントローラ、モデルを作成できるように頑張る。