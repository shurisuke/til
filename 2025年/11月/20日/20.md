
# 検索機能についての復習

1. paramsを使って検索キーワードを受け取る
def index
  @keyword = params[:keyword]
end
検索フォームで入力された値はparamsによってコントローラに渡る。


2. whereを使って単純な一致検索を行う
@users = User.where(name: params[:keyword])
一致するデータだけを取り出すには where を使う。


3. LIKEを使って部分一致（曖昧）検索を行う
@users = User.where("name LIKE ?", "%#{params[:keyword]}%")
あいまいな文字列の一致を探したいときは LIKE と % を使う。


4. Ransackを使った検索フォームの導入
@q = User.ransack(params[:q])
@users = @q.result
Ransackを使うと、複雑な検索フォームも少ないコードで書ける。


5. 検索結果を並び替える（例：新着順）
@users = User.where("name LIKE ?", "%#{params[:keyword]}%").order(created_at: :desc)
並び順も order を使えば柔軟に変更できる。


6. フォームからの検索入力欄を作る
<%= form_with url: users_path, method: :get do %>
  <%= text_field_tag :keyword, params[:keyword] %>
  <%= submit_tag "検索" %>
<% end %>
form_with を使って検索用の入力フォームを簡単に作れる。


7. 複数条件を組み合わせた検索も可能
@users = User.where("name LIKE ?", "%#{params[:keyword]}%").where(active: true)
検索条件は重ねて書くことで複数の条件にできる。