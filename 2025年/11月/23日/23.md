# 今日のまとめ
今日はテーブル設計が結構進んだ
認証に必要なカラムを調べるのが結構大変だった。
明日でER図を完成させるぞー！

# テーブル設計のメモ

#### usersテーブル （ユーザー情報）
- name : ユーザーの表示名 /（例:山田太郎）
- email : ログイン認証用のメールアドレス / ユニーク制約 /（例:taro@example.com）
- encrypted_password : ハッシュ化されたログインパスワード（Deviseで自動管理）
- reset_password_token : パスワード再設定用トークン（Deviseでメール認証時に使用）
- reset_password_sent_at : パスワード再設定トークンの送信時刻（Deviseでメール認証時に使用）
- unconfirmed_email : メールアドレス変更時に一時保存する新しいメールアドレス（Deviseのconfirmableモジュール利用時に使用）
- remember_created_at : ログイン状態を保持するための基準日時（Deviseでrememberableモジュールを使ったメール認証時に使用）
- status : 公開・非公開・凍結状態用のステータス（アカウント凍結機能は拡張性として考慮） /
           enum status: { public: 0, private: 1, deactivated: 2 }
- created_at : レコード作成日時
- updated_at : レコード更新日時

#### user_spotsテーブル（ユーザー・スポット間中間テーブル）
- user_id : usersテーブル外部キー / foreign_key: true
- spot_id : spotsテーブル外部キー / foreign_key: true
- memo : スポットに対するユーザーごとのメモ / 例:(レジャー系のスポットのメモ→”濡れる可能性があるので着替えを持っていく”)
- created_at : レコード作成日時
- updated_at : レコード更新日時

#### spotsテーブル（例：ユーザー情報）
- name　: スポットの場所名 / 例:（〇〇水族館）
- address : スポットの住所 / 例:（〇〇県〇〇〇市〇-〇〇）
- latitude : スポットの緯度(GoogleMapAPIでのスポット位置特定用)
- longitude : スポットの経度(GoogleMapAPIでのスポット位置特定用)
- place_id : GoogleMap側で保存されている場所ごとに一意なid（重複登録防止用）
- prefecture : GoogleMap側から抽出したスポットの住所の都道府県名 / 例:（〇〇県）
- city : GoogleMap側から抽出したスポットの住所の市区町村名 / 例:（〇〇市）
- photo_reference : Google Places API から取得できる、スポットに紐づく画像を特定するための一意の文字列(文字列型) /
                    スポット画像の表示をする際にURL構成部品として使用
- created_at : レコード作成日時
- updated_at : レコード更新日時

#### user_spot_tagsテーブル（user_spotごとのタグ）
- user_spot_id : user_spotsテーブル外部キー / foreign_key: true
- tag_id : tagsテーブル外部キー / foreign_key: true
- created_at : レコード作成日時
- updated_at : レコード更新日時

#### like_spotsテーブル（例：ユーザー情報）
- user_id : usersテーブル外部キー / foreign_key: true
- spot_id : spotsテーブル外部キー / foreign_key: true
- created_at : レコード作成日時
- updated_at : レコード更新日時

#### plansテーブル（例：ユーザー情報）
- user_id : プランを作成したユーザーのid / usersテーブル外部キー / foreign_key: true
- title : プランのタイトル / 例:（那須 紅葉めぐりドライブ）
- total_time : プランの総移動距離 / 例:（40）
- total_distance : プランの総移動距離 / 例:（168）
- total_cost : EC料金合計 / 例:（3400）
- created_at : レコード作成日時
- updated_at : レコード更新日時

#### plan_spotsテーブル（例：ユーザー情報）
- spot_id : spotsテーブル外部参照キー / foreign_key: true
- plan_id :　plansテーブル外部参照キー / foreign_key: true
- position :　プラン内スポット順管理用カラム(gem'acts_as_list'を使い、スポット削除や順番入れ替えに対応)
- move_time : position番号が一つ前のスポットから、このスポットに着くまでの時間 / default: 0, null: false / 例:（60）
- move_distance : position番号が一つ前のスポットから、このスポットに着くまでの距離 / default: 0, null: false / 例:（40）
- move_cost : position番号が一つ前のスポットから、このスポットに着くまでにかかった有料道路代金 / default: 0, null: false / 例:（1400）
- toll_used : 有料道路使用の有無(真偽値) / default: false, null: false / 例:（"true"）
- created_at : レコード作成日時
- updated_at : レコード更新日時

#### start_pointsテーブル（例：ユーザー情報）
- plan_id : 所属するプランのid / plansテーブル外部キー / foreign_key: true
- address : 出発地点の住所/ 例:（〇〇県〇〇〇市〇-〇〇）
- latitude : 出発地点の緯度(GoogleMapAPIでのスポット位置特定用)
- longitude : 出発地点の経度(GoogleMapAPIでのスポット位置特定用)
- prefecture : GoogleMap側から抽出したスポットの住所の都道府県名 / 拡張性（出発地点からおすすめをする機能を想定） / 例:（〇〇県）
- city : GoogleMap側から抽出したスポットの住所の市区町村名 / 拡張性（出発地点からおすすめをする機能を想定）  / 例:（〇〇市）
- created_at : レコード作成日時
- updated_at : レコード更新日時

#### end_pointsテーブル（例：ユーザー情報）
- plan_id : 所属するプランのid / plansテーブル外部キー / foreign_key: true
- address : 帰宅地点の住所/ 例:（〇〇県〇〇〇市〇-〇〇）
- latitude : 帰宅地点の緯度(GoogleMapAPIでのスポット位置特定用)
- longitude : 帰宅地点の経度(GoogleMapAPIでのスポット位置特定用)
- created_at : レコード作成日時
- updated_at : レコード更新日時

#### like_plansテーブル（例：ユーザー情報）
- user_id : お気に入り登録したユーザーのid / usersテーブル外部キー / foreign_key: true
- plan_id : お気に入り登録されたプランのid / plansテーブル外部キー / foreign_key: true
- created_at : レコード作成日時
- updated_at : レコード更新日時
